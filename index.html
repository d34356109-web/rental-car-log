<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ËªäËºõË®ÇÂñÆÁÆ°ÁêÜÁ≥ªÁµ±</title>
    
    <!-- Tailwind CSS (Ê®£ÂºèÂ∫´) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Ëß£Ê±∫ React Âú®ÁÄèË¶ΩÂô®Áõ¥Êé•ÈÅãË°åÁöÑÁõ∏‰æùÊÄßÂïèÈ°å -->
    <script type="importmap">
      {
        "imports": {
          "react": "https://esm.sh/react@18.2.0",
          "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
          "lucide-react": "https://esm.sh/lucide-react@0.292.0",
          "firebase/app": "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js",
          "firebase/auth": "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js",
          "firebase/firestore": "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js"
        }
      }
    </script>
    
    <!-- Babel (ËÆìÁÄèË¶ΩÂô®ÁúãÊáÇ JSX) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        body { font-family: 'Inter', system-ui, -apple-system, sans-serif; background-color: #f8fafc; }
        /* Èö±ËóèÊú™ËºâÂÖ•ÊôÇÁöÑÈñÉÁàç */
        #root:empty { display: none; }
    </style>
</head>
<body>
    <div id="root"></div>

    <!-- ‰∏ªÁ®ãÂºèÈÇèËºØ -->
    <script type="text/babel" data-type="module">
        import React, { useState, useEffect, useMemo } from 'react';
        import { createRoot } from 'react-dom/client';
        import { 
            Calendar, Car, Users, CreditCard, Snowflake, Sun,
            Plus, Search, Edit3, Trash2, Clock, Save, X, 
            LogOut, ShieldCheck, Database, CheckCircle
        } from 'lucide-react';

        // --- Firebase SDK ---
        import { initializeApp } from 'firebase/app';
        import { getAuth, signInAnonymously, onAuthStateChanged } from 'firebase/auth';
        import { 
            getFirestore, collection, addDoc, updateDoc, deleteDoc, doc, onSnapshot, 
            serverTimestamp 
        } from 'firebase/firestore';

        // üî¥ Ë´ãÂú®ÈÄôË£°Â°´ÂÖ•ÊÇ®ÁöÑ Firebase Ë®≠ÂÆö (‰øùÁïôÂºïËôü) üî¥
        const firebaseConfig = {
            apiKey: "AIzaSyDq65URVL5sppv-2yXBh8DQuEwaXm5u5k0",
            authDomain: "myrentalcarsystem-a88fb.firebaseapp.com",
            projectId: "myrentalcarsystem-a88fb",
            storageBucket: "myrentalcarsystem-a88fb.firebasestorage.app",
            messagingSenderId: "1076727464488",
            appId: "1:1076727464488:web:9599c788414f5211896b1d"
        };

        // ÂàùÂßãÂåñ Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        // --- È†êË®≠Ë≥áÊñô (Â∑≤Ê†πÊìöÂúñÁâá image_6c7a5e.png Êõ¥Êñ∞) ---
        const INITIAL_VEHICLES_SEED = [
            { location: 'ÊàêÁî∞', plate: 'ÊàêÁî∞330„Çè888', brand: 'Toyota', model: 'Vellfire', feature: 'HEV 4WD', seats: 8, etc: '8001 6161 4861 3901 001', tire: 'ÂÜ¨Ê∏à' },
            { location: 'ÊàêÁî∞', plate: 'ÂíåÊ≥â330„Çè2222', brand: 'Toyota', model: 'Alphard', feature: '', seats: 8, etc: '8001 6161 4860 7900 000', tire: 'ÂÜ¨Ê∏à' },
            { location: 'ÊàêÁî∞', plate: '„Å™„Å´„Çè334„Çè8888', brand: 'Toyota', model: 'Alphard', feature: '40Á≥ª Captain', seats: 7, etc: '7804 2150 2134 9280', tire: 'ÂÜ¨Ê∏à' },
            { location: 'ÊàêÁî∞', plate: 'ÂíåÊ≥â333„Çè1111', brand: 'Toyota', model: 'Vellfire', feature: '', seats: 7, etc: '8001 6161 4861 9900 000', tire: 'ÂÜ¨Ê∏à' },
            { location: 'ÊàêÁî∞', plate: '„Å™„Å´„Çè335„Çè8888', brand: 'Toyota', model: 'Alphard', feature: 'HEV 4WD', seats: 8, etc: '8001 6161 4860 6901 000', tire: 'ÂÜ¨Ê∏à' },
            { location: 'ÊàêÁî∞', plate: 'ÂìÅÂ∑ù302„Çè2282', brand: 'Toyota', model: 'Alphard', feature: '', seats: 7, etc: '8026 8702 5853 4820 000', tire: 'ÂÜ¨Ê∏à' },
            { location: 'ÊàêÁî∞', plate: 'ÂìÅÂ∑ù302„Çè6466', brand: 'Toyota', model: 'Alphard', feature: 'HEV', seats: 7, etc: '7070 3000 2295 9138', tire: 'Â§èÊ∏à' },
            { location: 'ÊàêÁî∞', plate: 'Êüè300„Çè2258', brand: 'Toyota', model: 'Alphard', feature: '', seats: 7, etc: '8001 6161 4861 4901 000', tire: 'ÂÜ¨Ê∏à' },
            // Êñ∞Â¢ûÂÖ©Âè∞Ëªä
            { location: 'ÊàêÁî∞', plate: 'Êüè300„Çè2588', brand: 'Toyota', model: 'Alphard', feature: '', seats: 7, etc: '8001 6161 4860 9901 007', tire: 'ÂÜ¨Ê∏à' },
            { location: 'ÊàêÁî∞', plate: 'Êüè300„Çè2599', brand: 'Toyota', model: 'Alphard', feature: '4WD', seats: 7, etc: '8001 6161 4860 0901 006', tire: 'ÂÜ¨Ê∏à' },
        ];

        // --- React Component ---
        function VehicleOrderSystem() {
            const [user, setUser] = useState(null);
            const [activeTab, setActiveTab] = useState('dashboard');
            const [vehicles, setVehicles] = useState([]);
            const [orders, setOrders] = useState([]);
            const [isLoading, setIsLoading] = useState(true);
            
            const [isOrderModalOpen, setIsOrderModalOpen] = useState(false);
            const [editingOrder, setEditingOrder] = useState(null);
            const [isVehicleModalOpen, setIsVehicleModalOpen] = useState(false);
            const [editingVehicle, setEditingVehicle] = useState(null);
            
            const [searchTerm, setSearchTerm] = useState('');
            const [filterDate, setFilterDate] = useState(new Date().toISOString().split('T')[0]);

            const [orderFormData, setOrderFormData] = useState({
                customer: '', start: '', end: '', vehicleId: '', note: '', status: 'confirmed'
            });
            const [vehicleFormData, setVehicleFormData] = useState({
                location: 'ÊàêÁî∞', plate: '', brand: 'Toyota', model: 'Alphard', feature: '', seats: 7, etc: '', tire: 'ÂÜ¨Ê∏à'
            });
            const [newEtcNumber, setNewEtcNumber] = useState('');

            // Auth & Sync
            useEffect(() => {
                signInAnonymously(auth).catch(console.error);
                const unsubscribe = onAuthStateChanged(auth, (currentUser) => {
                    setUser(currentUser);
                    if (currentUser) {
                        const unsubVehicles = onSnapshot(collection(db, 'vehicles'), (snap) => {
                            setVehicles(snap.docs.map(d => ({ id: d.id, ...d.data() })));
                            setIsLoading(false);
                        });
                        const unsubOrders = onSnapshot(collection(db, 'orders'), (snap) => {
                            setOrders(snap.docs.map(d => ({ id: d.id, ...d.data() })));
                        });
                        return () => { unsubVehicles(); unsubOrders(); };
                    } else {
                        setIsLoading(false);
                    }
                });
                return () => unsubscribe();
            }, []);

            // Helpers
            const formatDateTime = (iso) => {
                if (!iso) return '';
                const d = new Date(iso);
                return `${d.getFullYear()}/${(d.getMonth()+1).toString().padStart(2,'0')}/${d.getDate().toString().padStart(2,'0')} ${d.getHours().toString().padStart(2,'0')}:${d.getMinutes().toString().padStart(2,'0')}`;
            };

            const getVehicleOrderForDate = (vid, dateStr) => {
                const startOfDay = new Date(`${dateStr}T00:00:00`);
                const endOfDay = new Date(`${dateStr}T23:59:59`);
                return orders.find(o => o.vehicleId === vid && o.status !== 'cancelled' && new Date(o.start) < endOfDay && new Date(o.end) > startOfDay);
            };

            const isVehicleAvailable = (vid, start, end, excludeId) => {
                const s = new Date(start);
                const e = new Date(end);
                return !orders.some(o => o.vehicleId === vid && o.id !== excludeId && o.status !== 'cancelled' && s < new Date(o.end) && e > new Date(o.start));
            };

            // Actions
            const handleSaveOrder = async (e) => {
                e.preventDefault();
                if (!orderFormData.customer || !orderFormData.start || !orderFormData.end || !orderFormData.vehicleId) return alert("Ë´ãÂ°´ÂØ´ÂøÖÂ°´Ê¨Ñ‰Ωç");
                if (new Date(orderFormData.start) >= new Date(orderFormData.end)) return alert("ÊôÇÈñìÈåØË™§");
                if (!isVehicleAvailable(orderFormData.vehicleId, orderFormData.start, orderFormData.end, editingOrder?.id)) return alert("Ë©≤ÊôÇÊÆµËªäËºõÂ∑≤Ë¢´È†êÁ¥Ñ");

                try {
                    const data = { ...orderFormData, updatedAt: serverTimestamp() };
                    if (editingOrder) await updateDoc(doc(db, 'orders', editingOrder.id), data);
                    else await addDoc(collection(db, 'orders'), { ...data, createdAt: serverTimestamp() });
                    setIsOrderModalOpen(false);
                } catch (err) { alert("ÂÑ≤Â≠òÂ§±Êïó: " + err.message); }
            };

            const handleDeleteOrder = async (id) => {
                if(window.confirm("Á¢∫ÂÆöÂà™Èô§?")) await deleteDoc(doc(db, 'orders', id));
            };

            const handleSaveVehicle = async (e) => {
                e.preventDefault();
                try {
                    const data = { ...vehicleFormData, updatedAt: serverTimestamp() };
                    if (editingVehicle) await updateDoc(doc(db, 'vehicles', editingVehicle.id), data);
                    else await addDoc(collection(db, 'vehicles'), { ...data, createdAt: serverTimestamp() });
                    setIsVehicleModalOpen(false);
                } catch (err) { alert("ÂÑ≤Â≠òÂ§±Êïó"); }
            };

            const handleDeleteVehicle = async (id) => {
                if(window.confirm("Á¢∫ÂÆöÂà™Èô§?")) await deleteDoc(doc(db, 'vehicles', id));
            };

            const handleSeedData = async () => {
                if(!window.confirm(`Á¢∫ÂÆöÂåØÂÖ• ${INITIAL_VEHICLES_SEED.length} Âè∞ËªäËºõ?`)) return;
                try {
                    const existingPlates = vehicles.map(v => v.plate);
                    const newVehicles = INITIAL_VEHICLES_SEED.filter(v => !existingPlates.includes(v.plate));
                    if (newVehicles.length === 0) return alert("È†êË®≠ËªäËºõÂ∑≤Â≠òÂú®ÔºåÁÑ°ÈúÄÂåØÂÖ•");
                    await Promise.all(newVehicles.map(v => addDoc(collection(db, 'vehicles'), { ...v, createdAt: serverTimestamp() })));
                    alert(`ÊàêÂäüÂåØÂÖ• ${newVehicles.length} Âè∞Êñ∞ËªäËºõÔºÅ`);
                } catch (e) { alert("Â§±Êïó: " + e.message); }
            };

            if (isLoading) return <div className="min-h-screen flex items-center justify-center text-slate-500">ËºâÂÖ•Ë≥áÊñô‰∏≠...</div>;

            return (
                <div className="pb-20 md:pb-0">
                    <nav className="bg-slate-900 text-white p-4 sticky top-0 z-20 flex justify-between items-center shadow">
                        <div className="flex items-center gap-2 font-bold"><Car className="text-blue-400"/> Ë™øÂ∫¶Á≥ªÁµ±</div>
                        <div className="text-xs text-gray-400 flex items-center gap-1">
                            {user ? <span className="text-green-400">‚óè Á∑ö‰∏ä</span> : <span>ÈÄ£Á∑ö‰∏≠...</span>}
                        </div>
                    </nav>

                    <main className="p-4 max-w-5xl mx-auto">
                        {vehicles.length < 10 && !isLoading && (
                            <div className="mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg flex justify-between items-center">
                                <span className="text-sm text-blue-800">Âø´ÈÄüÈñãÂßãÔºöË≥áÊñôÂ∫´‰ºº‰πéÁº∫Â∞ëÈÉ®ÂàÜÈ†êË®≠ËªäËºõÔºåÊòØÂê¶Ë£úÈΩäÔºü</span>
                                <button onClick={handleSeedData} className="px-3 py-1 bg-blue-600 text-white text-xs rounded">‰∏ÄÈçµË£úÈΩäË≥áÊñô</button>
                            </div>
                        )}

                        {activeTab === 'dashboard' && (
                            <div className="space-y-4">
                                <div className="flex justify-between items-center bg-white p-3 rounded shadow-sm">
                                    <h2 className="font-bold">ÁúãÊùø</h2>
                                    <input type="date" value={filterDate} onChange={e=>setFilterDate(e.target.value)} className="border rounded p-1" />
                                </div>
                                <div className="space-y-3">
                                    {vehicles.map(v => {
                                        const order = getVehicleOrderForDate(v.id, filterDate);
                                        return (
                                            <div key={v.id} className="bg-white p-4 rounded shadow-sm border-l-4 border-l-blue-500">
                                                <div className="flex justify-between">
                                                    <div className="font-bold text-lg">{v.plate}</div>
                                                    <div className={`text-xs px-2 py-1 rounded ${order?'bg-red-100 text-red-700':'bg-green-100 text-green-700'}`}>{order?'Âá∫Áßü‰∏≠':'Á©∫Ëªä'}</div>
                                                </div>
                                                <div className="text-sm text-gray-500 mb-2">
                                                    {v.model} 
                                                    {v.feature ? ` / ${v.feature}` : ''}
                                                    {v.tire ? ` (${v.tire})` : ''}
                                                </div>
                                                {order ? (
                                                    <div className="text-sm bg-gray-50 p-2 rounded">
                                                        <div className="font-medium text-blue-700">{order.customer}</div>
                                                        <div className="text-xs text-gray-500">{formatDateTime(order.start)} - {formatDateTime(order.end)}</div>
                                                    </div>
                                                ) : (
                                                    <button onClick={()=>{
                                                        setEditingOrder(null);
                                                        setOrderFormData({customer:'', start:`${filterDate}T10:00`, end:`${filterDate}T18:00`, vehicleId: v.id, note:'', status:'confirmed'});
                                                        setIsOrderModalOpen(true);
                                                    }} className="mt-2 w-full py-1 text-sm border border-blue-600 text-blue-600 rounded">Ê¥æÂñÆ</button>
                                                )}
                                            </div>
                                        )
                                    })}
                                </div>
                            </div>
                        )}

                        {activeTab === 'vehicles' && (
                            <div className="space-y-4">
                                <button onClick={()=>{setEditingVehicle(null); setVehicleFormData({location: 'ÊàêÁî∞', plate: '', brand: 'Toyota', model: 'Alphard', feature: '', seats: 7, etc: '', tire: 'ÂÜ¨Ê∏à'}); setIsVehicleModalOpen(true)}} className="w-full py-3 bg-blue-600 text-white rounded shadow font-bold flex justify-center gap-2"><Plus/> Êñ∞Â¢ûËªäËºõ</button>
                                {vehicles.map(v => (
                                    <div key={v.id} className="bg-white p-4 rounded shadow-sm flex justify-between items-center">
                                        <div>
                                            <div className="font-bold">{v.plate} <span className="text-xs text-gray-500">({v.location})</span></div>
                                            <div className="text-sm text-gray-500">
                                                {v.model} 
                                                {v.feature ? ` / ${v.feature}` : ''}
                                                {v.tire ? ` / ${v.tire}` : ''}
                                            </div>
                                            <div className="text-xs bg-gray-100 inline-block px-1 rounded mt-1">ETC: {v.etc||'ÁÑ°'}</div>
                                        </div>
                                        <div className="flex gap-2">
                                            <button onClick={()=>{setEditingVehicle(v); setVehicleFormData(v); setIsVehicleModalOpen(true)}} className="p-2 text-gray-400 hover:text-blue-600"><Edit3 size={18}/></button>
                                            <button onClick={()=>handleDeleteVehicle(v.id)} className="p-2 text-gray-400 hover:text-red-600"><Trash2 size={18}/></button>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        )}

                        {activeTab === 'orders' && (
                            <div className="space-y-4">
                                <button onClick={()=>{setEditingOrder(null); setOrderFormData({customer:'', start:'', end:'', vehicleId:'', note:'', status:'confirmed'}); setIsOrderModalOpen(true)}} className="w-full py-3 bg-blue-600 text-white rounded shadow font-bold flex justify-center gap-2"><Plus/> Êñ∞Â¢ûË®ÇÂñÆ</button>
                                {orders.sort((a,b)=>new Date(b.start)-new Date(a.start)).map(o => {
                                    const v = vehicles.find(x=>x.id===o.vehicleId);
                                    return (
                                        <div key={o.id} className="bg-white p-4 rounded shadow-sm">
                                            <div className="flex justify-between mb-1">
                                                <span className="font-bold">{o.customer}</span>
                                                <span className="text-xs bg-blue-50 text-blue-600 px-2 py-1 rounded">{o.status}</span>
                                            </div>
                                            <div className="text-sm text-gray-800 mb-1">
                                                {v?.plate || 'ËªäËºõÂ∑≤Âà™Èô§'}
                                                {v?.feature ? ` (${v.feature})` : ''}
                                            </div>
                                            <div className="text-xs text-gray-500 mb-3">{formatDateTime(o.start)} <br/> ‚Üì <br/> {formatDateTime(o.end)}</div>
                                            <div className="flex justify-end gap-3 border-t pt-2">
                                                <button onClick={()=>{setEditingOrder(o); setOrderFormData(o); setIsOrderModalOpen(true)}} className="text-sm text-blue-600">Á∑®ËºØ</button>
                                                <button onClick={()=>handleDeleteOrder(o.id)} className="text-sm text-red-600">Âà™Èô§</button>
                                            </div>
                                        </div>
                                    )
                                })}
                            </div>
                        )}
                    </main>

                    <div className="fixed bottom-0 left-0 right-0 bg-white border-t flex justify-around p-3 z-20 text-xs">
                        <button onClick={()=>setActiveTab('dashboard')} className={`flex flex-col items-center ${activeTab==='dashboard'?'text-blue-600':'text-gray-400'}`}><Calendar size={20}/><span>ÁúãÊùø</span></button>
                        <button onClick={()=>setActiveTab('vehicles')} className={`flex flex-col items-center ${activeTab==='vehicles'?'text-blue-600':'text-gray-400'}`}><Car size={20}/><span>ËªäËºõ</span></button>
                        <button onClick={()=>setActiveTab('orders')} className={`flex flex-col items-center ${activeTab==='orders'?'text-blue-600':'text-gray-400'}`}><Users size={20}/><span>Ë®ÇÂñÆ</span></button>
                    </div>

                    {isOrderModalOpen && (
                        <div className="fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4">
                            <div className="bg-white w-full max-w-md rounded-lg p-5 max-h-[90vh] overflow-y-auto">
                                <h3 className="font-bold text-lg mb-4">{editingOrder?'Á∑®ËºØ':'Êñ∞Â¢û'}Ë®ÇÂñÆ</h3>
                                <form onSubmit={handleSaveOrder} className="space-y-3">
                                    <input placeholder="ÂÆ¢Êà∂ÂßìÂêç" className="w-full border p-2 rounded" value={orderFormData.customer} onChange={e=>setOrderFormData({...orderFormData, customer:e.target.value})} required/>
                                    <div className="grid grid-cols-2 gap-2">
                                        <div><label className="text-xs">ÂèñËªä</label><input type="datetime-local" className="w-full border p-2 rounded text-sm" value={orderFormData.start} onChange={e=>setOrderFormData({...orderFormData, start:e.target.value})} required/></div>
                                        <div><label className="text-xs">ÈÇÑËªä</label><input type="datetime-local" className="w-full border p-2 rounded text-sm" value={orderFormData.end} onChange={e=>setOrderFormData({...orderFormData, end:e.target.value})} required/></div>
                                    </div>
                                    <div className="space-y-2 max-h-60 overflow-y-auto pr-1">
                                        {vehicles.map(v=>{
                                            const available = isVehicleAvailable(v.id, orderFormData.start, orderFormData.end, editingOrder?.id);
                                            // ‰øÆÊ≠£ÔºöÁßªÈô§ Number() ËΩâÂûãÔºåÂõ†ÁÇ∫ Firestore ID ÊòØÂ≠ó‰∏≤
                                            const isSelected = orderFormData.vehicleId === v.id;
                                            return (
                                                <label 
                                                    key={v.id} 
                                                    className={`
                                                        relative flex items-center justify-between p-3 border rounded-lg cursor-pointer transition-all
                                                        ${isSelected ? 'border-blue-500 bg-blue-50 ring-1 ring-blue-500' : 'border-gray-200 hover:bg-gray-50'}
                                                        ${!available ? 'opacity-50 bg-gray-100 cursor-not-allowed' : ''}
                                                    `}
                                                >
                                                    <div className="flex items-center gap-3">
                                                        {/* ÈÅ∏ÂèñÁãÄÊÖãÔºöÊîπÁî® CheckCircle ÂúñÁ§∫ */}
                                                        {isSelected ? (
                                                            <CheckCircle className="w-5 h-5 text-blue-600" />
                                                        ) : (
                                                            <div className="w-5 h-5 rounded-full border border-gray-400" />
                                                        )}
                                                        
                                                        <div className="flex flex-col">
                                                            <div className="font-bold text-slate-800 text-sm">
                                                                {v.plate} 
                                                            </div>
                                                            <div className="text-xs text-gray-500 flex flex-wrap gap-1 items-center">
                                                                <span>{v.model}</span>
                                                                {v.feature && (
                                                                    <>
                                                                        <span className="text-gray-300">|</span>
                                                                        <span className="font-medium text-blue-600">{v.feature}</span>
                                                                    </>
                                                                )}
                                                                {v.tire && (
                                                                    <>
                                                                        <span className="text-gray-300">|</span>
                                                                        <span>{v.tire}</span>
                                                                    </>
                                                                )}
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                    {!available && <span className="text-xs text-red-500 font-bold px-2 py-1 bg-red-100 rounded">Â∑≤ÁßüÂÄü</span>}
                                                    
                                                    {/* Èö±ËóèÁöÑÂéüÁîü Radio */}
                                                    <input 
                                                        type="radio" 
                                                        name="vid" 
                                                        className="hidden" 
                                                        checked={isSelected} 
                                                        onChange={()=> available && setOrderFormData({...orderFormData, vehicleId:v.id})} 
                                                        disabled={!available} 
                                                    />
                                                </label>
                                            );
                                        })}
                                    </div>
                                    <div className="flex gap-2 justify-end pt-2">
                                        <button type="button" onClick={()=>setIsOrderModalOpen(false)} className="px-4 py-2 border rounded">ÂèñÊ∂à</button>
                                        <button type="submit" className="px-4 py-2 bg-blue-600 text-white rounded">ÂÑ≤Â≠ò</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    )}

                    {isVehicleModalOpen && (
                        <div className="fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4">
                            <div className="bg-white w-full max-w-md rounded-lg p-5">
                                <h3 className="font-bold text-lg mb-4">{editingVehicle?'Á∑®ËºØ':'Êñ∞Â¢û'}ËªäËºõ</h3>
                                <form onSubmit={handleSaveVehicle} className="space-y-3">
                                    <input placeholder="ËªäÁâå" className="w-full border p-2 rounded" value={vehicleFormData.plate} onChange={e=>setVehicleFormData({...vehicleFormData, plate:e.target.value})} required/>
                                    <div className="flex gap-2">
                                        <input placeholder="ËªäÂûã" className="w-full border p-2 rounded" value={vehicleFormData.model} onChange={e=>setVehicleFormData({...vehicleFormData, model:e.target.value})} required/>
                                        <input placeholder="ÁâπÂæµ (Â¶Ç: HEV 4WD)" className="w-full border p-2 rounded" value={vehicleFormData.feature} onChange={e=>setVehicleFormData({...vehicleFormData, feature:e.target.value})} />
                                    </div>
                                    <select className="w-full border p-2 rounded" value={vehicleFormData.tire} onChange={e=>setVehicleFormData({...vehicleFormData, tire:e.target.value})}>
                                        <option value="ÂÜ¨Ê∏à">ÂÜ¨ËÉé</option><option value="Â§èÊ∏à">Â§èËÉé</option>
                                    </select>
                                    <div className="space-y-2">
                                        <select className="w-full border p-2 rounded" value={vehicleFormData.etc} onChange={e=>setVehicleFormData({...vehicleFormData, etc:e.target.value})}>
                                                <option value="">-- ETC ÈÖçÁΩÆ --</option>
                                                {Array.from(new Set(vehicles.map(v=>v.etc).filter(Boolean))).concat(newEtcNumber ? [newEtcNumber] : []).map(etc => (
                                                    <option key={etc} value={etc}>{etc}</option>
                                                ))}
                                        </select>
                                        <div className="flex gap-2">
                                            <input placeholder="Êñ∞Âç°Ëôü" className="w-full border p-2 rounded text-sm" value={newEtcNumber} onChange={e=>setNewEtcNumber(e.target.value)}/>
                                            <button type="button" onClick={()=>newEtcNumber && (setVehicleFormData({...vehicleFormData, etc:newEtcNumber}), setNewEtcNumber(''))} className="px-3 py-1 bg-green-500 text-white rounded text-xs whitespace-nowrap">Êñ∞Â¢û</button>
                                        </div>
                                    </div>
                                    <div className="flex gap-2 justify-end pt-2">
                                        <button type="button" onClick={()=>setIsVehicleModalOpen(false)} className="px-4 py-2 border rounded">ÂèñÊ∂à</button>
                                        <button type="submit" className="px-4 py-2 bg-blue-600 text-white rounded">ÂÑ≤Â≠ò</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        const root = createRoot(document.getElementById('root'));
        root.render(<VehicleOrderSystem />);
    </script>
</body>
</html>
